# Devlog: 2025-11-04

## Focus

Architecture evolution: 3 layers → 4 layers with learn-then-abstract approach.

## Key Insight

Can't design good abstraction (M2-VFS) without understanding concrete case (M1-CLAUDE). Inserting claude-native layer makes this explicit.

## Architecture Change

**Old:** M1 (API) → M2 (Cache) → M3 (CLI)

**New:** M1-CLAUDE (native) → M2-VFS (normalized) → M3-CACHE (persistence) → M4-CLI (UX)

M1-CLAUDE outputs whatever Claude returns (no normalization decisions). M2-VFS designs normalization based on M1-CLAUDE findings.

## Other Decisions

- **Fork representation:** Split into 3 phases across M1/M2/M3 milestones (was conflating distinct questions)
- **Provider abstraction:** New design incubator, depends on M1-CLAUDE findings

## Commits

- `46b343d` - docs: evolve architecture from 3 to 4 layers with phased milestones
- `e34d740` - docs: Phase 1.25 Step 1 - evolve architecture to 4 layers

## Next Session

Phase 1.25 Step 2: Milestone renaming across docs (work backwards M3→M2→M1→M0).

## Links

- [../../../TODO.md] - Phase 1.25 tracking
- [2025-11-02.md] - Previous session
